<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Productos - PAâ€™ MI CASA</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/responsive.css" />
</head>
<body>

  <!-- HEADER -->
  <header class="main-header">
    <img src="img/banner.png" alt="PA' MI CASA Banner" class="header-banner" />
    <div class="header-overlay">
      <div class="header-actions">
        <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
        <a href="cart.html" class="cart-icon">
          ðŸ›’ <span id="cart-count">0</span>
        </a>
      </div>
    </div>

    <!-- MenÃº lateral -->
    <nav class="side-menu" id="sideMenu">
      <a href="index.html">Home</a>
      <a href="Products.html">Productos</a>
      <a href="gestor.html">Quiero ser Gestor</a>
      <a href="#Global Imports">Global Imports</a>
      <a href="remesas/remesas.html">Remesas</a>
      <a href="#reviews">Reviews</a>
      <a href="#contact">Contact</a>
    </nav>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>
  </header>

  <!-- PRODUCTOS -->
  <main class="products">
    <h2>Todos los Productos</h2>
    <div class="product-grid" id="product-container">
      <!-- Productos serÃ¡n cargados dinÃ¡micamente -->
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="social-links">
      <a href="#">Facebook</a> |
      <a href="#">Instagram</a> |
      <a href="#">WhatsApp</a>
    </div>
    <p>Â© 2025 PAâ€™ MI CASA. Todos los derechos reservados.</p>
  </footer>

  <!-- SCRIPTS -->
  <script src="js/main.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/ubicacion.js"></script>
  <script src="js/ref-manager.js"></script>
  <script src="js/cargar-productos.js"></script>

  <script>
    // Toggle menu para abrir/cerrar menÃº lateral
    function toggleMenu() {
      document.getElementById("sideMenu").classList.toggle("active");
      document.getElementById("overlay").classList.toggle("active");
    }

    // AÃ±adir ref=? al navegar por la tienda
    document.addEventListener("DOMContentLoaded", () => {
      const ref = localStorage.getItem("gestorRef");
      if (!ref) return;

      document.querySelectorAll("a[href]").forEach(link => {
        const href = link.getAttribute("href");

        // Solo enlaces internos y sin ref ya
        if (href && !href.startsWith("http") && !href.includes("ref=")) {
          const sep = href.includes("?") ? "&" : "?";
          link.setAttribute("href", `${href}${sep}ref=${encodeURIComponent(ref)}`);
        }
      });
    });
  </script>

</body>
</html>
